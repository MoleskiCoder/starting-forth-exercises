\ PIEs

VARIABLE PIES

: RESET-PIES
   0 PIES !  ;

: BAKE-PIE
   1 PIES +! ;

: EAT-PIE
   PIES @ 0= IF
     ." what pie?"
   else
     -1 PIES +!
     ." thank you!"
   THEN ;

CR
RESET-PIES
eat-PIE
BAKE-PIE
eat-PIE

VARIABLE FROZEN-PIES

: RESET-FROZEN-PIES
   0 FROZEN-PIES ! ;

: FREEZE-PIES
   PIES @ RESET-PIES FROZEN-PIES ! ;
   
CR
RESET-FROZEN-PIES
BAKE-PIE CR
BAKE-PIE CR
FREEZE-PIES CR
PIES ?
FROZEN-PIES ? CR

\ current forth number BASE

: .BASE
   BASE @ DUP
   DECIMAL .
   BASE ! ;

CR
DECIMAL .BASE CR
HEX .BASE CR

DECIMAL

\ PENCILS

0 CONSTANT RED
1 CONSTANT BLUE
2 CONSTANT GREEN
3 CONSTANT ORANGE

VARIABLE PENCIL-STORE 3 CELLS ALLOT

: PENCILS
   CELLS PENCIL-STORE + ;

23 RED PENCILS !
15 BLUE PENCILS !
12 GREEN PENCILS !
0 ORANGE PENCILS !

CR
RED PENCILS ? CR
BLUE PENCILS ? CR
GREEN PENCILS ? CR
ORANGE PENCILS ? CR

\ HISTOGRAM dIsplay

VARIABLE HISTOGRAM 9 CELLS ALLOT

: HISTOGRAM-ELEMENT
   CELLS HISTOGRAM + ;

: STAR
   [CHAR] * EMIT ;

: STARS
   0 DO STAR LOOP ;

: HISTOGRAM-ROW
   HISTOGRAM-ELEMENT @ STARS ;

: PLOT-ROW
   DUP 1+ . HISTOGRAM-ROW CR ;

: PLOT
   10 0 DO I PLOT-ROW LOOP ;

2 0 HISTOGRAM-ELEMENT !
4 1 HISTOGRAM-ELEMENT !
6 2 HISTOGRAM-ELEMENT !
8 3 HISTOGRAM-ELEMENT !
10 4 HISTOGRAM-ELEMENT !
20 5 HISTOGRAM-ELEMENT !
30 6 HISTOGRAM-ELEMENT !
40 7 HISTOGRAM-ELEMENT !
25 8 HISTOGRAM-ELEMENT !
15 9 HISTOGRAM-ELEMENT !

CR
PLOT

\ OXO board

VARIABLE OXO-DATA 8 ALLOT

: NEW-OXO-GAME ( -- )
   OXO-DATA 9 ERASE ;

: OXO-ELEMENT ( index -- address )
   OXO-DATA + ;

: X-PIECE ( -- )
   [CHAR] x EMIT ;

: O-PIECE ( -- )
   [CHAR] o EMIT ;

: BAR ( -- )
   [CHAR] | EMIT ;

: HYPHEN ( -- )
   [CHAR] - EMIT ;

: HYPHENS ( n -- )
   0 DO HYPHEN LOOP ;

: OXO-ELEMENT? ( n -- )
   ( cannot test agaInst -1 because we store as a byte 255 )
   OXO-ELEMENT C@ DUP
   0= IF SPACE DROP ELSE
   1 = IF X-PIECE ELSE
     O-PIECE
   THEN THEN ;

: HYPHEN-ROW ( -- )
   11 HYPHENS ;

: OXO? ( -- )
   9 0 DO
     SPACE I OXO-ELEMENT?
     I 1+ 3 MOD 0= IF
       CR
       I 7 < IF HYPHEN-ROW CR THEN
     ELSE
       SPACE BAR
     THEN
   LOOP
   CR ;

: PLAYER! ( index value -- )
   SWAP OXO-ELEMENT C! OXO? CR ;

: X! ( n -- )
   1- 1 PLAYER! ;

: O! ( n -- )
   1- -1 PLAYER! ;

CR

NEW-OXO-GAME

4 X!
3 O!

.S
